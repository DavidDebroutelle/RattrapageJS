<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Jeu du lancé de dé</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <h1>Chargement...</h1>

      <div class="dice">
        <p>Joueur 1</p>
        <img class="img1" src="" />
      </div>

      <div class="dice">
        <p>Joueur 2</p>
        <img class="img2" src="" />
      </div>
    </div>
    <script>
  // Quand le document est chargé
  document.addEventListener("DOMContentLoaded", function() {
    // Déclarations variables
    let joueur1, joueur2, i = 0;
    // Lien de l'API
    let url = "https://www.random.org/integers/?num=1&min=1&max=6&col=1&base=10&format=plain&rnd=new"
    // Selecteur
    let h1 = document.getElementsByTagName('h1')[0];
    // Lancé de dés pour le joueur1
    fetch(url)
      .then(response => response.text())
      .then(response => {
        joueur1 = response // Score joueur1
        document.getElementsByClassName('img1')[0].setAttribute('src', 'images/dice' + joueur1 + '.png') // Image du dé pour le joueur 1
        // Lancé de dés pour le joueur2
      fetch(url)
          .then(response => response.text())
          .then(response => {
            joueur2 = response // Score joueur2
            document.getElementsByClassName('img2')[0].setAttribute('src', 'images/dice' + joueur2 + '.png') // Image du dé pour le joueur 2
            theWinnerIs(joueur1, joueur2)
        });
    });
    // Fonction qui affiche le gagnant
    function theWinnerIs(joueur1, joueur2) {
      if (joueur1 < joueur2) h1.innerHTML = 'Joueur 2 gagne'
      else if (joueur1 > joueur2) h1.innerHTML = 'Joueur 1 gagne'
      else if (joueur1 === joueur2) h1.innerHTML = 'égalité'
    }
  });
  </script>
  </body>
</html>
